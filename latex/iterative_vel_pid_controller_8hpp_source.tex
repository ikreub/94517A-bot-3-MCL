\doxysection{iterative\+Vel\+Pid\+Controller.\+hpp}
\hypertarget{iterative_vel_pid_controller_8hpp_source}{}\label{iterative_vel_pid_controller_8hpp_source}\index{include/okapi/api/control/iterative/iterativeVelPidController.hpp@{include/okapi/api/control/iterative/iterativeVelPidController.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla\ Public}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ License,\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed\ with\ this}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}okapi/api/control/iterative/iterativeVelocityController.hpp"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}okapi/api/control/util/settledUtil.hpp"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}okapi/api/filter/passthroughFilter.hpp"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}okapi/api/filter/velMath.hpp"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}okapi/api/util/logging.hpp"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}okapi/api/util/timeUtil.hpp"{}}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{namespace\ }okapi\ \{}
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_afc4237f568ab87b15212462dc1e9155c}{IterativeVelPIDController}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_velocity_controller}{IterativeVelocityController}}<double,\ double>\ \{}
\DoxyCodeLine{00017\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00018\ \ \ \textcolor{keyword}{struct\ }\doxymbox{\hyperlink{structokapi_1_1_iterative_vel_p_i_d_controller_1_1_gains}{Gains}}\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordtype}{double}\ kP\{0\};}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{double}\ kD\{0\};}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{double}\ kF\{0\};}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{double}\ kSF\{0\};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{structokapi_1_1_iterative_vel_p_i_d_controller_1_1_gains}{Gains}}\ \&rhs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{structokapi_1_1_iterative_vel_p_i_d_controller_1_1_gains}{Gains}}\ \&rhs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00026\ \ \ \};}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00040\ \ \ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_afc4237f568ab87b15212462dc1e9155c}{IterativeVelPIDController}}(}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{double}\ ikP,}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{double}\ ikD,}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{double}\ ikF,}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{double}\ ikSF,}
\DoxyCodeLine{00045\ \ \ \ \ std::unique\_ptr<VelMath>\ ivelMath,}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_time_util}{TimeUtil}}\ \&itimeUtil,}
\DoxyCodeLine{00047\ \ \ \ \ std::unique\_ptr<Filter>\ iderivativeFilter\ =\ std::make\_unique<PassthroughFilter>(),}
\DoxyCodeLine{00048\ \ \ \ \ std::shared\_ptr<Logger>\ ilogger\ =\ \doxymbox{\hyperlink{classokapi_1_1_logger_ac9dd2e38a412a692816f150b0ac3f0b4}{Logger::getDefaultLogger}}());}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00059\ \ \ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a364914d3e0be9ad3164351419b765560}{IterativeVelPIDController}}(}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{const}\ \doxymbox{\hyperlink{structokapi_1_1_iterative_vel_p_i_d_controller_1_1_gains}{Gains}}\ \&igains,}
\DoxyCodeLine{00061\ \ \ \ \ std::unique\_ptr<VelMath>\ ivelMath,}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_time_util}{TimeUtil}}\ \&itimeUtil,}
\DoxyCodeLine{00063\ \ \ \ \ std::unique\_ptr<Filter>\ iderivativeFilter\ =\ std::make\_unique<PassthroughFilter>(),}
\DoxyCodeLine{00064\ \ \ \ \ std::shared\_ptr<Logger>\ ilogger\ =\ \doxymbox{\hyperlink{classokapi_1_1_logger_ac9dd2e38a412a692816f150b0ac3f0b4}{Logger::getDefaultLogger}}());}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00073\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a7d75bb1622974daba25a9dec4df68325}{step}}(\textcolor{keywordtype}{double}\ inewReading)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00080\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_ab4ec4344fa758ba8cce93633aa0851d2}{setTarget}}(\textcolor{keywordtype}{double}\ itarget)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00088\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a50c069752036261395871fbe175ae101}{controllerSet}}(\textcolor{keywordtype}{double}\ ivalue)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00095\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a5f2bbad6e916345f8a3abf762609321c}{getTarget}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00102\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a557555049cabcda2301a7f438135305a}{getTarget}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00107\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_ab6a38ef2fabcf521cddac4a97578e113}{getProcessValue}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00112\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_ab3f4050524cb54b4e3df951a8d84ac57}{getOutput}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00119\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_acf26277c959a7fd03c918340e194a361}{getMaxOutput}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00126\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a0401715743d991c5ca9f3afa51a5a069}{getMinOutput}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00131\ \ \ \textcolor{keywordtype}{double}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a7e60b432a91d73db0a62c5d31759ed10}{getError}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00141\ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a818347e199d8e7fd3e11f9f1aa369749}{isSettled}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00148\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_aef5ba457e81871d47519413551856bb8}{setSampleTime}}(QTime\ isampleTime)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00156\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a02efd865f97b0f2da3f826c1120ec07b}{setOutputLimits}}(\textcolor{keywordtype}{double}\ imax,\ \textcolor{keywordtype}{double}\ imin)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00165\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a054d5bff10ba504b9f72db567ad45bfb}{setControllerSetTargetLimits}}(\textcolor{keywordtype}{double}\ itargetMax,\ \textcolor{keywordtype}{double}\ itargetMin)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00171\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a51607c29e072a672522a9e93bbd12410}{reset}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00177\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a9a575df2d0a53ca71a812a86d673b8fa}{flipDisable}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a6bd2a04813b0fd99f0904808ff963f28}{flipDisable}}(\textcolor{keywordtype}{bool}\ iisDisabled)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00192\ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a628a5093634f85d788015c4cc1353c54}{isDisabled}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00199\ \ \ QTime\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_aa786680075677c2f43619d48cad0e154}{getSampleTime}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00207\ \ \ \textcolor{keyword}{virtual}\ QAngularSpeed\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_add5783b19186944e74334e2fd72f1b02}{stepVel}}(\textcolor{keywordtype}{double}\ inewReading);}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00214\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_ab63a87696b32060485f26a7be704f9de}{setGains}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{structokapi_1_1_iterative_vel_p_i_d_controller_1_1_gains}{Gains}}\ \&igains);}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00221\ \ \ \doxymbox{\hyperlink{structokapi_1_1_iterative_vel_p_i_d_controller_1_1_gains}{Gains}}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_ad85bd2777d95c7de3b1fc7205ea3e396}{getGains}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00228\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_a1b8daee60eb1d693efca174bf5a0351e}{setTicksPerRev}}(\textcolor{keywordtype}{double}\ tpr);}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00233\ \ \ \textcolor{keyword}{virtual}\ QAngularSpeed\ \doxymbox{\hyperlink{classokapi_1_1_iterative_vel_p_i_d_controller_affacdc23775f995fe61fb0667e6f098e}{getVel}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00236\ \ \ std::shared\_ptr<Logger>\ logger;}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordtype}{double}\ kP,\ kD,\ kF,\ kSF;}
\DoxyCodeLine{00238\ \ \ QTime\ sampleTime\{10\_ms\};}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordtype}{double}\ error\{0\};}
\DoxyCodeLine{00240\ \ \ \textcolor{keywordtype}{double}\ derivative\{0\};}
\DoxyCodeLine{00241\ \ \ \textcolor{keywordtype}{double}\ target\{0\};}
\DoxyCodeLine{00242\ \ \ \textcolor{keywordtype}{double}\ outputSum\{0\};}
\DoxyCodeLine{00243\ \ \ \textcolor{keywordtype}{double}\ output\{0\};}
\DoxyCodeLine{00244\ \ \ \textcolor{keywordtype}{double}\ outputMax\{1\};}
\DoxyCodeLine{00245\ \ \ \textcolor{keywordtype}{double}\ outputMin\{-\/1\};}
\DoxyCodeLine{00246\ \ \ \textcolor{keywordtype}{double}\ controllerSetTargetMax\{1\};}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordtype}{double}\ controllerSetTargetMin\{-\/1\};}
\DoxyCodeLine{00248\ \ \ \textcolor{keywordtype}{bool}\ controllerIsDisabled\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ std::unique\_ptr<VelMath>\ velMath;}
\DoxyCodeLine{00251\ \ \ std::unique\_ptr<Filter>\ derivativeFilter;}
\DoxyCodeLine{00252\ \ \ std::unique\_ptr<AbstractTimer>\ loopDtTimer;}
\DoxyCodeLine{00253\ \ \ std::unique\_ptr<SettledUtil>\ settledUtil;}
\DoxyCodeLine{00254\ \};}
\DoxyCodeLine{00255\ \}\ \textcolor{comment}{//\ namespace\ okapi}}

\end{DoxyCode}

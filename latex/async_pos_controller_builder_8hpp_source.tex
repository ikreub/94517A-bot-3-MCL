\doxysection{async\+Pos\+Controller\+Builder.\+hpp}
\hypertarget{async_pos_controller_builder_8hpp_source}{}\label{async_pos_controller_builder_8hpp_source}\index{include/okapi/impl/control/async/asyncPosControllerBuilder.hpp@{include/okapi/impl/control/async/asyncPosControllerBuilder.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla\ Public}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ License,\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed\ with\ this}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}okapi/api/control/async/asyncPosIntegratedController.hpp"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}okapi/api/control/async/asyncPosPidController.hpp"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}okapi/api/control/async/asyncPositionController.hpp"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}okapi/api/util/logging.hpp"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}okapi/impl/device/motor/motor.hpp"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}okapi/impl/device/motor/motorGroup.hpp"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}okapi/impl/device/rotarysensor/adiEncoder.hpp"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}okapi/impl/device/rotarysensor/integratedEncoder.hpp"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}okapi/impl/util/timeUtilFactory.hpp"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{namespace\ }okapi\ \{}
\DoxyCodeLine{00019\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \{}
\DoxyCodeLine{00020\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00027\ \ \ \textcolor{keyword}{explicit}\ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}(}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{const}\ std::shared\_ptr<Logger>\ \&ilogger\ =\ \doxymbox{\hyperlink{classokapi_1_1_logger_ac9dd2e38a412a692816f150b0ac3f0b4}{Logger::getDefaultLogger}}());}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00036\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_afe930ec31b591b6b2bf80be12bba3d79}{withMotor}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_motor}{Motor}}\ \&imotor);}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00044\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_aa93b974218c68cdd213274446a7fe4c4}{withMotor}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_motor_group}{MotorGroup}}\ \&imotor);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00052\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_a837f30643945bf8a5522c9a374ec98dc}{withMotor}}(\textcolor{keyword}{const}\ std::shared\_ptr<AbstractMotor>\ \&imotor);}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00060\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_aab579369bc48c43c207cecc23d20b424}{withSensor}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_a_d_i_encoder}{ADIEncoder}}\ \&isensor);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00068\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ad6667ad29a7834452b50390294cde4fa}{withSensor}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_integrated_encoder}{IntegratedEncoder}}\ \&isensor);}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00076\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_a1e6bf12a95ebde3adc90f3d6cfaf9adc}{withSensor}}(\textcolor{keyword}{const}\ std::shared\_ptr<RotarySensor>\ \&isensor);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00085\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_a4ac4afe101f6e49150d5f285ccd02e50}{withGains}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{structokapi_1_1_iterative_pos_p_i_d_controller_1_1_gains}{IterativePosPIDController::Gains}}\ \&igains);}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00095\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_a6d1bda12787e919e9b52d06703824fd1}{withDerivativeFilter}}(std::unique\_ptr<Filter>\ iderivativeFilter);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00103\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_a70ac24982216681b1e05a20306b2271b}{withGearset}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{structokapi_1_1_abstract_motor_1_1_gearset_ratio_pair}{AbstractMotor::GearsetRatioPair}}\ \&igearset);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00112\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ad95a82910616350d5519fd391143d26d}{withMaxVelocity}}(\textcolor{keywordtype}{double}\ imaxVelocity);}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00121\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_afbec86a67bab3037b2d633dc10575702}{withTimeUtilFactory}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_time_util_factory}{TimeUtilFactory}}\ \&itimeUtilFactory);}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00129\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ace47053e63313f56c5646e41e5410335}{withLogger}}(\textcolor{keyword}{const}\ std::shared\_ptr<Logger>\ \&ilogger);}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00141\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_aeb6bc091cef58dfddb3af235d88fbee7}{parentedToCurrentTask}}();}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00154\ \ \ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_ab5016bcf0679d7bae87d19d21cbff95f}{AsyncPosControllerBuilder}}\ \&\doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_a9f9bf5e46f7c98b13cb3cf86f64e12c6}{notParentedToCurrentTask}}();}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00161\ \ \ std::shared\_ptr<AsyncPositionController<double,\ double>>\ \doxymbox{\hyperlink{classokapi_1_1_async_pos_controller_builder_a15bce1f485fee03c7f1772736eea7075}{build}}();}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00164\ \ \ std::shared\_ptr<Logger>\ logger;}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{keywordtype}{bool}\ hasMotors\{\textcolor{keyword}{false}\};\ \textcolor{comment}{//\ Used\ to\ verify\ motors\ were\ passed}}
\DoxyCodeLine{00167\ \ \ std::shared\_ptr<AbstractMotor>\ motor;}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \textcolor{keywordtype}{bool}\ sensorsSetByUser\{\textcolor{keyword}{false}\};\ \textcolor{comment}{//\ Used\ so\ motors\ don't\ overwrite\ sensors\ set\ manually}}
\DoxyCodeLine{00170\ \ \ std::shared\_ptr<RotarySensor>\ sensor;}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \textcolor{keywordtype}{bool}\ hasGains\{\textcolor{keyword}{false}\};\ \textcolor{comment}{//\ Whether\ gains\ were\ passed,\ no\ gains\ means\ integrated\ control}}
\DoxyCodeLine{00173\ \ \ IterativePosPIDController::Gains\ gains;}
\DoxyCodeLine{00174\ \ \ std::unique\_ptr<Filter>\ derivativeFilter\ =\ std::make\_unique<PassthroughFilter>();}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \textcolor{keywordtype}{bool}\ gearsetSetByUser\{\textcolor{keyword}{false}\};\ \textcolor{comment}{//\ Used\ so\ motor's\ don't\ overwrite\ a\ gearset\ set\ manually}}
\DoxyCodeLine{00177\ \ \ AbstractMotor::GearsetRatioPair\ pair\{AbstractMotor::gearset::invalid\};}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{keywordtype}{bool}\ maxVelSetByUser\{\textcolor{keyword}{false}\};\ \textcolor{comment}{//\ Used\ so\ motors\ don't\ overwrite\ maxVelocity}}
\DoxyCodeLine{00180\ \ \ \textcolor{keywordtype}{double}\ maxVelocity\{600\};}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ TimeUtilFactory\ timeUtilFactory\ =\ TimeUtilFactory();}
\DoxyCodeLine{00183\ \ \ std::shared\_ptr<Logger>\ controllerLogger\ =\ \doxymbox{\hyperlink{classokapi_1_1_logger_ac9dd2e38a412a692816f150b0ac3f0b4}{Logger::getDefaultLogger}}();}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{bool}\ isParentedToCurrentTask\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ std::shared\_ptr<AsyncPosIntegratedController>\ buildAPIC();}
\DoxyCodeLine{00188\ \ \ std::shared\_ptr<AsyncPosPIDController>\ buildAPPC();}
\DoxyCodeLine{00189\ \};}
\DoxyCodeLine{00190\ \}\ \textcolor{comment}{//\ namespace\ okapi}}

\end{DoxyCode}

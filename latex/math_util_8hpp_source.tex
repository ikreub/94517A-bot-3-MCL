\doxysection{math\+Util.\+hpp}
\hypertarget{math_util_8hpp_source}{}\label{math_util_8hpp_source}\index{include/okapi/api/util/mathUtil.hpp@{include/okapi/api/util/mathUtil.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla\ Public}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ License,\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed\ with\ this}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}okapi/api/device/motor/abstractMotor.hpp"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }okapi\ \{}
\DoxyCodeLine{00018\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ inchToMM\ =\ 25.4;}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ mmToInch\ =\ 0.0393700787;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ degreeToRadian\ =\ 0.01745329252;}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ radianToDegree\ =\ 57.2957795;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ imeTorqueTPR\ =\ 627.2;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::int32\_t\ imeSpeedTPR\ =\ 392;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ imeTurboTPR\ =\ 261.333;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ ime269TPR\ =\ 240.448;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::int32\_t\ imev5RedTPR\ =\ 1800;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::int32\_t\ imev5GreenTPR\ =\ 900;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::int32\_t\ imev5BlueTPR\ =\ 300;}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00073\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::int32\_t\ quadEncoderTPR\ =\ 360;}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00078\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ pi\ =\ 3.1415926535897932;}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00083\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ pi2\ =\ 1.5707963267948966;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ gravity\ =\ 9.80665;}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00093\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ OKAPI\_PROS\_ERR\ =\ INT32\_MAX;}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00098\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ OKAPI\_PROS\_ERR\_F\ =\ INFINITY;}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00103\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ v5MotorMaxVoltage\ =\ 12000;}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00108\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::int8\_t\ motorUpdateRate\ =\ 10;}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00113\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::int8\_t\ adiUpdateRate\ =\ 10;}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00122\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ ipow(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ base,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ expo)\ \{}
\DoxyCodeLine{00123\ \ \ \textcolor{keywordflow}{return}\ (expo\ ==\ 0)\ ?\ 1}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ :\ expo\ ==\ 1\ ?\ base}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ :\ expo\ >\ 1\ \ ?\ ((expo\ \&\ 1)\ ?\ base\ *\ ipow(base,\ expo\ -\/\ 1)}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ ipow(base,\ expo\ /\ 2)\ *\ ipow(base,\ expo\ /\ 2))}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ 1\ /\ ipow(base,\ -\/expo);}
\DoxyCodeLine{00128\ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00139\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ cutRange(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ value,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ min,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ max)\ \{}
\DoxyCodeLine{00140\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ middle\ =\ max\ -\/\ ((max\ -\/\ min)\ /\ 2);}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \textcolor{keywordflow}{if}\ (value\ >\ min\ \&\&\ value\ <\ middle)\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{return}\ min;}
\DoxyCodeLine{00144\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (value\ <=\ max\ \&\&\ value\ >=\ middle)\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordflow}{return}\ max;}
\DoxyCodeLine{00146\ \ \ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \textcolor{keywordflow}{return}\ value;}
\DoxyCodeLine{00149\ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ deadband(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ value,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ min,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ max)\ \{}
\DoxyCodeLine{00161\ \ \ \textcolor{keywordflow}{return}\ std::clamp(value,\ min,\ max)\ ==\ value\ ?\ 0\ :\ value;}
\DoxyCodeLine{00162\ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00174\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{double}\ remapRange(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ value,}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ oldMin,}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ oldMax,}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ newMin,}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ newMax)\ \{}
\DoxyCodeLine{00179\ \ \ \textcolor{keywordflow}{return}\ (value\ -\/\ oldMin)\ *\ ((newMax\ -\/\ newMin)\ /\ (oldMax\ -\/\ oldMin))\ +\ newMin;}
\DoxyCodeLine{00180\ \}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00188\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ E>\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ toUnderlyingType(\textcolor{keyword}{const}\ E\ e)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}std::underlying\_type\_t<E>\textcolor{keyword}{>}(e);}
\DoxyCodeLine{00190\ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00198\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ boolToSign(\textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ b)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00199\ \ \ \textcolor{keywordflow}{return}\ b\ ?\ 1\ :\ -\/1;}
\DoxyCodeLine{00200\ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00210\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{long}\ modulus(\textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ lhs,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{long}\ rhs)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{return}\ ((lhs\ \%\ rhs)\ +\ rhs)\ \%\ rhs;}
\DoxyCodeLine{00212\ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00220\ \textcolor{keyword}{constexpr}\ std::int32\_t\ gearsetToTPR(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{classokapi_1_1_abstract_motor_a88aaa6ea2fa10f5520a537bbf26774d5}{AbstractMotor::gearset}}\ igearset)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{switch}\ (igearset)\ \{}
\DoxyCodeLine{00222\ \ \ \textcolor{keywordflow}{case}\ \doxymbox{\hyperlink{classokapi_1_1_abstract_motor_a88aaa6ea2fa10f5520a537bbf26774d5abda9643ac6601722a28f238714274da4}{AbstractMotor::gearset::red}}:}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{return}\ imev5RedTPR;}
\DoxyCodeLine{00224\ \ \ \textcolor{keywordflow}{case}\ \doxymbox{\hyperlink{classokapi_1_1_abstract_motor_a88aaa6ea2fa10f5520a537bbf26774d5a9f27410725ab8cc8854a2769c7a516b8}{AbstractMotor::gearset::green}}:}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordflow}{return}\ imev5GreenTPR;}
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{case}\ \doxymbox{\hyperlink{classokapi_1_1_abstract_motor_a88aaa6ea2fa10f5520a537bbf26774d5a48d6215903dff56238e52e8891380c8f}{AbstractMotor::gearset::blue}}:}
\DoxyCodeLine{00227\ \ \ \textcolor{keywordflow}{case}\ AbstractMotor::gearset::invalid:}
\DoxyCodeLine{00228\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{return}\ imev5BlueTPR;}
\DoxyCodeLine{00230\ \ \ \}}
\DoxyCodeLine{00231\ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00246\ \textcolor{keyword}{constexpr}\ std::int8\_t\ transformADIPort(\textcolor{keyword}{const}\ std::int8\_t\ port)\ \{}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{if}\ (port\ >=\ \textcolor{charliteral}{'a'}\ \&\&\ port\ <=\ \textcolor{charliteral}{'h'})\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{return}\ port\ -\/\ (\textcolor{charliteral}{'a'}\ -\/\ 1);}
\DoxyCodeLine{00249\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (port\ >=\ \textcolor{charliteral}{'A'}\ \&\&\ port\ <=\ \textcolor{charliteral}{'H'})\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordflow}{return}\ port\ -\/\ (\textcolor{charliteral}{'A'}\ -\/\ 1);}
\DoxyCodeLine{00251\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordflow}{return}\ port;}
\DoxyCodeLine{00253\ \ \ \}}
\DoxyCodeLine{00254\ \}}
\DoxyCodeLine{00255\ \}\ \textcolor{comment}{//\ namespace\ okapi}}

\end{DoxyCode}
